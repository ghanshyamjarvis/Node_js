<html>
<head>
 <!-- <script>

    function random_function()
    {
      var a=document.getElementById("input").value

      if(a==="COUNTRY")
      {
        var arr=["INDIA","USA"];
      }
      else if(a==="STATE")
      {
        var arr=["Maharashtra","Delhi","GUJARAT"];
      }
      else if(a==="CITIES")
      {
        var arr=["abc","xyz","asa"];
      }

      var string="";

      for(i=0;i<arr.length;i++)
      {
        string=string+"<option value="+arr[i]+">"+ arr[i]+" </option>";
      }
      document.getElementById("output").innerHTML=string;
    }
    var ajax =  new XMLHttpRequest();
    var method = "GET";
    var url = "getallcountry";
    var asynchronous = true;

    ajax.open(method,url,asynchronous);
    //Sending ajax request
    ajax.send();

    //reciving response from  data
    ajax.onreadystatechange = function ()
    {
      if (this.readyState == 4 && this.status == 200)
        {
           alert(this.responseText)
        }
    }
</script>-->
</head>
<body>
<h1><%= title %></h1>
<select id="country" onchange="getstate()"> </select>
<select id="state" onchange="getcities()"> </select>
<select id="cities"> </select>
<script>
          document.addEventListener("DOMContentLoaded", function (event) {
             var ajax = new XMLHttpRequest();
             var method = "GET";
             var url = "http://localhost:5000/getallcountry";
             var asynchronous = true;
             ajax.open(method, url, asynchronous);
             ajax.send();
           ajax.onreadystatechange = function () {
             if (this.readyState == 4 && this.status == 200) {
             console.log(typeof this.responseText);
             var resData = JSON.parse(this.responseText);
             var data = resData.data;
             var string = "<option value=''></option>";
              data.forEach(function (item) {
               string = string + "<option value=" + item.id + ">" + item.name + "</option>";
              })
              document.getElementById('country').innerHTML = string;
             }
           }
          });
          function getstate() {
           var x = document.getElementById("country").value;
           var ajax =  new XMLHttpRequest();
           var method = "GET";
           var url = "http://localhost:5000/getallstate/"+ x;
           var asynchronous = true;
           ajax.open(method,url,asynchronous);
           ajax.send();
           ajax.onreadystatechange = function (){
            if (this.readyState == 4 && this.status == 200){
              console.log(typeof this.responseText);
              var resData = JSON.parse(this.responseText);
              var data = resData.data;
              var string = "<option value=''></option>";
               data.forEach (function(item){
                string = string+"<option value="+item.id+">"+item.name+"</option>" ;
               })
              document.getElementById('state').innerHTML=string;
            }
           }
          }
          function getcities() {
           var x = document.getElementById("state").value;
           var ajax =  new XMLHttpRequest();
           var method = "GET";
           var url = "http://localhost:5000/getallcities/"+ x;
           var asynchronous = true;
           ajax.open(method,url,asynchronous);
           ajax.send();
           ajax.onreadystatechange = function (){
             if (this.readyState == 4 && this.status == 200) {
               console.log(typeof this.responseText);
               var resData = JSON.parse(this.responseText);
               var data = resData.data;
               var string = "<option value=''></option>";
                 data.forEach (function(item){
                  string = string+"<option value="+item.id+">"+item.name+"</option>" ;
                 })
               document.getElementById('cities').innerHTML=string;
             }
           }
          }

</script>

<!--<select id="input" onchange="random_function()">
  <option>select option</option>
  <option>COUNTRY</option>
  <option>STATE</option>
  <option>CITIES</option>
</select>

<div>
  <select id="output">
  </select>
</div>-->
</body>
</html>

